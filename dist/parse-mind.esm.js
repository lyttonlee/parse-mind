function n(n,t,e,i){return new(e||(e=Promise))((function(o,r){function c(n){try{f(i.next(n))}catch(n){r(n)}}function u(n){try{f(i.throw(n))}catch(n){r(n)}}function f(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(c,u)}f((i=i.apply(n,t||[])).next())}))}var t;!function(n){n[n.left=0]="left",n[n.right=1]="right"}(t||(t={}));const e=["xmind"];function i(n){return new Promise(((t,i)=>{const o=n.name.split(".").pop();-1===e.indexOf(o)&&i(new Error(`仅支持${e.join(" ")}文件的解析！`));const r=new FileReader;r.readAsText(n),r.onloadend=function(){const n=r.result;t(n)},r.onerror=function(){i(new Error("文件解析错误！"))}}))}function o(n){let t=n.indexOf("content.json"),i=n.indexOf("content.xml"),o=n.slice(t,i);if(-1===t||-1===i)throw new Error(`仅支持${e.join(" ")}文件的解析！`);o=o.replace("content.json","");let r=o.lastIndexOf("]");return o=o.slice(0,r+1),JSON.parse(o)}function r(t){return n(this,void 0,void 0,(function*(){return o(yield i(t))}))}function c(t){return n(this,void 0,void 0,(function*(){return function(n){return function n(t){let e={};if(t.children&&t.children.attached.length>0){let i=t.children.attached.map((t=>n(t)));e.children=i}return e.id=t.id,e.topic=t.title,e}(n[0].rootTopic)}(o(yield i(t)))}))}export{c as parseXindFileToJsmind,r as parseXmindFileToJson};
